!function(e){"use strict";e(document).ready(function(){function t(){e("#semplice").off("click",".add-column"),u.addColumn(e(this))}function o(t){e("#semplice").off("click",".save"),e("#semplice").off("click",".duplicate"),e("#semplice").off("click",".save-block");var n=e(this);t.data.save_block?(e(".overlay").fadeIn(100),e(".confirm-save-block").fadeIn(100),e(".save-block-name").val(""),e("#semplice").on("click",".save-block-confirm",function(){e("#semplice").off("click",".save-block-confirm"),e(".overlay").fadeOut(100),e(".confirm-save-block").fadeOut(100),u.save(e(n),!1,!0)}),e("#semplice").on("click",".save-block-decline",function(){e(".overlay").fadeOut(100),e(".confirm-save-block").fadeOut(100),e("#semplice").off("click",".save-block-confirm"),e("#semplice").off("click",".save").on("click",".save",{duplicate:!1,save_block:!1},o),e("#semplice").off("click",".duplicate").on("click",".duplicate",{duplicate:!0,save_block:!1},o),e("#semplice").off("click",".save-block").on("click",".save-block",{duplicate:!1,save_block:!0},o)})):u.save(e(n),t.data.duplicate,t.data.save_block)}function n(t){e("#semplice").off("click",".save-mc"),e("#semplice").off("click",".duplicate-mc"),e("#semplice").off("click",".save-block-mc");var o=e(this);t.data.save_block?(e(".overlay").fadeIn(100),e(".confirm-save-block").fadeIn(100),e(".save-block-name").val(""),e("#semplice").on("click",".save-block-confirm",function(){e("#semplice").off("click",".save-block-confirm"),e(".overlay").fadeOut(100),e(".confirm-save-block").fadeOut(100),u.saveColumnContent(e(o),!1,!0)}),e("#semplice").on("click",".save-block-decline",function(){e(".overlay").fadeOut(100),e(".confirm-save-block").fadeOut(100),e("#semplice").off("click",".save-block-confirm"),e("#semplice").off("click",".save-mc").on("click",".save-mc",{duplicate:!1,save_block:!1},n),e("#semplice").off("click",".duplicate-mc").on("click",".duplicate-mc",{duplicate:!0,save_block:!1},n),e("#semplice").off("click",".save-block-mc").on("click",".save-block-mc",{duplicate:!1,save_block:!0},n)})):u.saveColumnContent(e(this),t.data.duplicate,t.data.save_block)}function a(){e("#semplice").off("click",".save-se"),u.saveSingleEdit(e(this))}function i(){e("#semplice").hasClass("show-all-layers")?u.hideLayers(e(this),!0):(e("#semplice").off("click",".content-container"),u.edit(e(this)))}function c(e){function t(e){return("0"+parseInt(e).toString(16)).slice(-2)}if(!e)return"transparent";var o=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);return o?"#"+t(o[1])+t(o[2])+t(o[3]):e}function l(e){sweetAlert({title:"Whooops",text:'The value for "'+e+'" contains invalid characters. Please avoid double quotes ("), single quotes (\') and backslashes (\\).',confirmButtonText:"Ok fine!"})}function s(){e(window).scroll(function(){e.each(e(".sticky-mc-atts"),function(){var t=10,o=e(this).height(),n=e(this).parent().offset().top,a=e(this).parent().height(),i=e(window).scrollTop();i>n-t&&n-t+a-o>i?e(this).hasClass("is-sticky")||(e(this).addClass("is-sticky"),e(this).css("top",t+50),e(this).show()):e(this).hasClass("is-sticky")&&(e(this).removeClass("is-sticky"),e(this).css("top",n),e(this).hide())})})}var d={fontset:"",modules:[],branding:{}},r=!1,m=/["'\\]/g,p=!1,u={init:function(){e(".branding-bg-color").wpColorPicker(v),e("head").append('<style id="semplice-decss"></style>'),e("#semplice").on("click",".content-container a, .mc-content-container a, .mc-sub-content-container a, .mailchimp-submit-button",function(e){e.preventDefault()});var t=function(e){e=e||window.event;var t="Do you really want to close the page without saving your progress?";return e&&(e.returnValue=t),t};if(window.onbeforeunload=t,e(".semplice-content").val()){e(".loader").show();var o=e.ajax({url:ajaxurl,type:"POST",data:{action:"semplice_ce_ajax",edit_mode:"init",post_id:wordpress.post_id},dataType:"json"});o.done(function(t){d=e.parseJSON(t.rom);var o=e(".fontset").val();void 0===d.branding&&(d.branding={}),void 0===d.modules&&(d.modules=[]),e("#semplice-content").css({"background-color":d.branding["background-color"],"background-size":d.branding["background-size"],"background-position":d.branding["background-position"],"background-repeat":d.branding["background-repeat"],"background-attachment":d.branding["background-attachment"]}),d.branding["background-image"]&&(e("#semplice-content").css({"background-image":"url("+d.branding["background-image"]+")"}),e(".branding-bg-image-preview").attr("src",d.branding["background-image"]).show(),e("input[name=branding-bg-image]").val(d.branding["background-image"])),e("#semplice-content").children("#content-holder").remove(),e("#semplice-content").append(t.html),e.each(t.deleted_blocks,function(t,o){delete d[o],e(o).remove()}),e.trim(e("#semplice-content #content-holder").html()).length||e(".semplice-ce-default").clone(!0).appendTo("#semplice-content").stop().fadeIn(500),e(".is-masonry").each(function(){var t=e(this).attr("id");void 0!==t&&e("#"+t).masonry()}),e(".image-link").click(function(e){return!1}),"default"!==o?(e(".custom-fontset").find("option").each(function(){e(this).val()===o?e(this).attr("selected","selected"):e(this).removeAttr("selected")}),u.customFontset(o)):u.customFontset("default"),e(".save-to-wp").addClass("save-to-wp-activated"),e(".loader").fadeOut("slow")}),o.fail(function(t,o){sweetAlert({title:"Error",type:"error",text:"JSON Parse Error: "+o,confirmButtonText:"Ok fine!"}),e(".loader").fadeOut("slow")}),o.error(function(e){sweetAlert({title:"Error",type:"error",text:e.responseText,confirmButtonText:"Ok fine!"})})}else u.customFontset("default"),e("#semplice-content").html(""),e("#semplice-content").append('<div id="content-holder"></div>'),e(".semplice-ce-default").clone(!0).appendTo("#semplice-content").stop().fadeIn(500),e(".save-to-wp").addClass("save-to-wp-activated")},add:function(t){e(".loader").show(),e("#semplice-content").find(e(".semplice-ce-default")).is(":visible")&&e("#semplice-content").find(e(".semplice-ce-default")).remove();var o=k("content"),n="#"+o,a=e(t).data("content-type"),i={"background-color":"transparent","background-image":"","background-size":"none","background-position":"50% 0%","background-repeat":"no-repeat","padding-top":"0px","padding-bottom":"0px","padding-right":"0px","padding-left":"0px"};d[n]="multi-column"===a?{columns:{},styles:{}}:{styles:{}};var c=e(t).data("module-id");c&&(d[n].custom_module=c,e(".modules-sub").fadeOut("fast")),d[n].styles=i;var l=e.ajax({url:ajaxurl,type:"POST",data:{action:"semplice_ce_ajax",id:o,content_type:a,edit_mode:"new",rom:d[n]},dataType:"html"});l.done(function(t){"ModuleNotFound"===t?(sweetAlert({title:"Whooops",text:"Module not found! Please make sure the selected module is installed.",confirmButtonText:"Ok fine!"}),e(".loader").fadeOut("slow")):(e("#content-holder").append(t),e(n).find(".color-picker").wpColorPicker(h),e(n).find(".wp-picker-default").remove(),e(n).find(".padding-left, .padding-right").remove(),"multi-column"===a&&(e(n).find(".save").attr("class","save-mc"),e(n).find(".duplicate").attr("class","duplicate-mc"),e(n).find(".save-block").attr("class","save-block-mc"),s()),e(n).addClass("in-edit-mode"),e(n).find(".fadein").transition({opacity:1},500,"ease",function(){e(this).removeClass("fadein")}),e(".loader").fadeOut("slow"),e(e.browser.webkit?"body":"html").animate({scrollTop:e(n).offset().top-100},0))}),l.fail(function(t,o){sweetAlert({title:"Error",type:"error",text:"Request failed: "+o,confirmButtonText:"Ok fine!"}),e(".loader").fadeOut("slow")})},addColumn:function(o){e(".loader").show();var n="#"+e(o).data("content-id"),a=e(n).find(".column").length+1,i=k("column"),c="#"+i,l={"background-color":"transparent","background-image":"","background-size":"none","background-position":"50% 0%","background-repeat":"no-repeat","padding-top":"0px","padding-bottom":"0px","padding-right":"0px","padding-left":"0px"};void 0===d[n].columns[c]&&(d[n].columns[c]={}),d[n].columns[c]={styles:{}},d[n].columns[c].styles=l;var s=e.ajax({url:ajaxurl,type:"POST",data:{action:"semplice_ce_ajax",id:i,parent_id:n,rom:d[n],column_count:a,content_type:"add-column",edit_mode:"new"},dataType:"html"});s.done(function(o){e(n).find(".columns").append(o),e(c).find(".save").remove(),e(c).find(".color-picker").wpColorPicker(h),e(c).find(".fadein").transition({opacity:1},500,"ease",function(){e(this).removeClass("fadein")}),e(c+" .column-body").show(),e(".loader").fadeOut("slow"),e("#semplice").on("click",".add-column",t),e(e.browser.webkit?"body":"html").animate({scrollTop:e(c).offset().top-100},0)}),s.fail(function(t,o){sweetAlert({title:"Error",type:"error",text:"Request failed: "+o,confirmButtonText:"Ok fine!"}),e(".loader").fadeOut("slow")})},addColumnContent:function(t){e(".loader").show();var o="#"+t.data("content-id"),n=k("column_content"),a="#"+t.data("column-id"),i="#"+n,c=e(t).data("content-type"),l={"background-color":"transparent","background-image":"","background-size":"none","background-position":"50% 0%","background-repeat":"no-repeat","padding-top":"0px","padding-bottom":"0px","padding-right":"0px","padding-left":"0px"};void 0===d[o].columns[a]&&(d[o].columns[a]={}),d[o].columns[a][i]={styles:{}},d[o].columns[a][i].styles=l;var s=e(t).data("module-id");s&&(d[o].columns[a][i].custom_module=s,e(".modules-sub").fadeOut("fast"));var r=e.ajax({url:ajaxurl,type:"POST",data:{action:"semplice_ce_ajax",id:n,ccId:o,content_type:c,rom:d[o],column_id:a,edit_mode:"new",is_column_content:!0},dataType:"html"});r.done(function(t){"ModuleNotFound"===t?(sweetAlert({title:"Whooops",text:"Module not found! Please make sure the selected module is installed.",confirmButtonText:"Ok fine!"}),e(".loader").fadeOut("slow")):(e(a).find(".column-inner").append(t),s&&e(i).attr("data-module-id",s),e(i).find(".save").remove(),e(i).prev(".placeholder").remove(),e(i).find(".color-picker").wpColorPicker(h),e(i).find(".wp-picker-default").remove(),e(i).addClass("in-edit-mode"),e(i).find(".fadein").transition({opacity:1},500,"ease",function(){e(this).removeClass("fadein")}),e(".loader").fadeOut("slow"),e(e.browser.webkit?"body":"html").animate({scrollTop:e(i).offset().top-140},0))}),r.fail(function(t,o){sweetAlert({title:"Error",type:"error",text:"Request failed: "+o,confirmButtonText:"Ok fine!"}),e(".loader").fadeOut("slow")})},save:function(t,n,a){e(".loader").show();var i,s=e(t).data("content-id"),r="#"+e(t).data("content-id"),f=e(t).data("content-type"),h=e(t).data("dynamic-block"),v=!1;if(p=!1,d[r]={content:"",styles:{},options:{},custom_module:"",content_type:f},a&&"dynamic"===e(".save-block-type").val()?d[r].dynamic_block=r:h&&(d[r].dynamic_block=h,v=!0),e(r).find(".is-content").each(function(){d[r].content=e(this).val(),0===e(this).val().length&&(i=!0)}),e(r).find(".is-option").each(function(){e.isArray(e(this).val())?d[r].options[e(this).attr("name")]=e(this).val():e(this).val().match(m)?(p=!0,l(e(this).attr("name"))):d[r].options[e(this).attr("name")]=e(this).val()}),e(r).find(".is-style").each(function(){e(this).val().match(m)?(p=!0,l(e(this).attr("name"))):d[r].styles[e(this).attr("name")]=e(this).val()}),e(r).find(".is-custom-module").each(function(){d[r].custom_module=e(this).val().replace(/["']/g,"")}),d[r].styles["background-color"]=c(d[r].styles["background-color"]),i||p)p||sweetAlert({title:"Whooops",text:"Please add some content before save!",confirmButtonText:"Ok fine!"}),e("#semplice").on("click",".save",{duplicate:!1,save_block:!1},o),e("#semplice").on("click",".duplicate",{duplicate:!0,save_block:!1},o),e("#semplice").on("click",".save-block",{duplicate:!1,save_block:!0},o),e(".loader").fadeOut("slow");else{var k=e.ajax({url:ajaxurl,type:"POST",data:{action:"semplice_ce_ajax",id:s,content_type:f,rom:d[r],post_id:wordpress.post_id,block_update:v},dataType:"html"});k.done(function(i){e(r).append(i),e("#semplice").on("click",".save",{duplicate:!1,save_block:!1},o),e("#semplice").on("click",".duplicate",{duplicate:!0,save_block:!1},o),e("#semplice").on("click",".save-block",{duplicate:!1,save_block:!0},o),e(r).find(".edit-content").remove(),e(r).removeClass("in-edit-mode"),e(r).find(".fadein-view").transition({opacity:1},500,"ease",function(){e(this).removeClass("fadein-view")}),e(".loader").fadeOut("slow"),e(e.browser.webkit?"body":"html").animate({scrollTop:e(r).offset().top-100},0),n?u.duplicate(t):a&&u.saveBlock(t)}),k.fail(function(t,n){sweetAlert({title:"Error",type:"error",text:"Request failed: "+n,confirmButtonText:"Ok fine!"}),e("#semplice").on("click",".save",o),e(".loader").fadeOut("slow")})}},saveSingleEdit:function(t){e(".loader").show();var o="#"+e(t).data("container-id"),n=e(t).data("container-id"),i=(e(t).data("content-id"),"#"+e(t).data("content-id")),s=e(t).data("column-id"),r=(e(t).data("content-type"),e(t).data("dynamic-block"),!1);d[o].dynamic_block&&(r=!0);var u;if(p=!1,e(i).find(".is-content").each(function(){d[o].columns[s][i].content=e(this).val(),0===e(this).val().length&&(u=!0)}),e(i).find(".is-cc-option").each(function(){e(this).val().match(m)?(p=!0,l(e(this).attr("name"))):d[o].columns[s][i].options[e(this).attr("name")]=e(this).val()}),e(i).find(".is-cc-style").each(function(){e(this).val().match(m)?(p=!0,l(e(this).attr("name"))):d[o].columns[s][i].styles[e(this).attr("name")]=e(this).val()}),d[o].columns[s][i].styles["background-color"]=c(d[o].columns[s][i].styles["background-color"]),u||p)p||sweetAlert({title:"Whooops",text:"Please add some content before save!",confirmButtonText:"Ok fine!"}),e("#semplice").on("click",".save-se",a),e(".loader").fadeOut("slow");else{var f=e.ajax({url:ajaxurl,type:"POST",data:{action:"semplice_ce_ajax",id:n,rom:d[o],content_type:"multi-column",post_id:wordpress.post_id,block_update:r},dataType:"html"});f.done(function(t){e(o).find(i).remove(),e(o).append(t),e("#semplice").on("click",".save-se",a),e(o).removeClass("in-edit-mode"),e(o).find(".fadein-view").transition({opacity:1},500,"ease",function(){e(this).removeClass("fadein-view")}),e(".loader").fadeOut("slow"),e(e.browser.webkit?"body":"html").animate({scrollTop:e(o).offset().top-100},0)}),f.fail(function(t,o){sweetAlert({title:"Error",type:"error",text:"Request failed: "+o,confirmButtonText:"Ok fine!"}),e("#semplice").on("click",".save-se",a),e(".loader").fadeOut("slow")})}},saveColumnContent:function(t,o,a){e(".loader").show();var i,s=e(t).data("content-id"),r="#"+e(t).data("content-id");p=!1;var f=e(t).data("content-type"),h=e(t).data("dynamic-block"),v=!1;if(d[r]={columns:{},styles:{},options:{},content_type:f},a&&"dynamic"===e(".save-block-type").val()?d[r].dynamic_block=r:h&&(d[r].dynamic_block=h,v=!0),e(r).find(".is-option").each(function(){e(this).val().match(m)?p=!0:d[r].options[e(this).attr("name")]=e(this).val()}),e(r).find(".is-style").each(function(){e(this).val().match(m)?p=!0:d[r].styles[e(this).attr("name")]=e(this).val()}),d[r].styles["background-color"]=c(d[r].styles["background-color"]),e(r).find(".column").each(function(){var t="#"+e(this).attr("id");d[r].columns[t]={options:{},styles:{}},e(e(this)).find(".is-option").each(function(){"column-name"==e(this).attr("name")&&e(this).val().match(m)?(p=!0,l(e(this).attr("name"))):d[r].columns[t].options[e(this).attr("name")]=e(this).val()}),e(t).find(".is-column-style").each(function(){e(this).val().match(m)?(p=!0,l(e(this).attr("name"))):d[r].columns[t].styles[e(this).attr("name")]=e(this).val()}),d[r].columns[t].styles["background-color"]=c(d[r].columns[t].styles["background-color"]),e(this).find(".column-content").each(function(){var t=(e(this),"#"+e(this).data("content-id")),o="#"+e(this).data("in-column"),n=e(this).data("content-type");d[r].columns[o][t]={content:{},styles:{},options:{},custom_module:"",content_type:n},e(this).find(".is-content").each(function(){d[r].columns[o][t].content=e(this).val(),0===e(this).val().length&&(i=!0)}),e(this).find(".is-cc-option").each(function(){e(this).val().match(m)?(p=!0,l(e(this).attr("name"))):d[r].columns[o][t].options[e(this).attr("name")]=e(this).val()}),e(this).find(".is-cc-style").each(function(){e(this).val().match(m)?(p=!0,l(e(this).attr("name"))):d[r].columns[o][t].styles[e(this).attr("name")]=e(this).val()}),e(this).find(".is-cc-custom-module").each(function(){d[r].columns[o][t].custom_module=e(this).val().replace(/["']/g,"")}),d[r].columns[o][t].styles["background-color"]=c(d[r].columns[o][t].styles["background-color"])})}),0===e(r).find(".column").length||0===e(r).find(".column-content").length||i||p)p||sweetAlert({title:"Whooops",text:"Please add some content before save!",confirmButtonText:"Ok fine!"}),e("#semplice").on("click",".save-mc",{duplicate:!1},n),e("#semplice").on("click",".duplicate-mc",{duplicate:!0},n),e("#semplice").on("click",".save-block-mc",{duplicate:!1,save_block:!0},n),e(".loader").fadeOut("slow");else{var k=e.ajax({url:ajaxurl,type:"POST",data:{action:"semplice_ce_ajax",id:s,rom:d[r],content_type:f,post_id:wordpress.post_id,block_update:v},dataType:"html"});k.done(function(i){e(r).append(i),e("#semplice").on("click",".save-mc",{duplicate:!1,save_block:!1},n),e("#semplice").on("click",".duplicate-mc",{duplicate:!0,save_block:!1},n),e("#semplice").on("click",".save-block-mc",{duplicate:!1,save_block:!0},n),e(r).find(".edit-content").remove(),e(r).removeClass("in-edit-mode"),e(r).find(".fadein-view").transition({opacity:1},500,"ease",function(){e(this).removeClass("fadein-view")}),e(".loader").fadeOut("slow"),e(e.browser.webkit?"body":"html").animate({scrollTop:e(r).offset().top-100},0),o?u.duplicate(t):a&&u.saveBlock(t)}),k.fail(function(t,o){sweetAlert({title:"Error",type:"error",text:"Request failed: "+o,confirmButtonText:"Ok fine!"}),e("#semplice").on("click",".save-mc",{duplicate:!1,save_block:!1},n),e("#semplice").on("click",".duplicate-mc",{duplicate:!0,save_block:!1},n),e("#semplice").on("click",".save-block-mc",{duplicate:!1,save_block:!0},n),e(".loader").fadeOut("slow")})}},edit:function(t){e(".loader").show(),s();var o=e(t).data("content-id"),n="#"+e(t).data("content-id"),a=e(t).data("content-type"),c=e.ajax({url:ajaxurl,type:"POST",data:{action:"semplice_ce_ajax",edit_mode:"edit",id:o,content_type:a,rom:d[n]},dataType:"html"});c.done(function(t){"ModuleNotFound"===t?(sweetAlert({title:"Whooops",text:"Module not found! Please re-install the module used in this content.",confirmButtonText:"Ok fine!"}),e("#semplice").on("click",".content-container",i),e(".loader").fadeOut("slow")):(e(n).append(t),"multi-column"===a?e(n).find(".mc-content-container").remove():(e("#semplice").on("click",".content-container",i),e(n).find(".content-container").remove()),e(n).find(".background-upload-box").each(function(){e(this).children("input[name=background-image]").val()&&e(this).children(".bg-image-preview, .column-bg-image-preview").show()}),e("input[name=img]").val()&&e(n).find("img.image-preview").show(),e(n).find(".color-picker").wpColorPicker(h),e(n).find(".wp-picker-default").remove(),"multi-column"===a?(e(n).find(".save").attr("class","save-mc"),e(n).find(".duplicate").attr("class","duplicate-mc"),e(n).find(".save-block").attr("class","save-block-mc"),e(n).find(".padding-left").first().remove(),e(n).find(".padding-right").first().remove()):e(n).find(".padding-left, .padding-right").remove(),e(n).find(".fadein").transition({opacity:1},500,"ease",function(){e(this).removeClass("fadein")}),e(n).addClass("in-edit-mode"),e(".loader").fadeOut("slow"),e(e.browser.webkit?"body":"html").animate({scrollTop:e(n).offset().top-100},0))}),c.fail(function(t,o){sweetAlert({title:"Error",type:"error",text:"Request failed: "+o,confirmButtonText:"Ok fine!"}),"multi-column"!==a&&e("#semplice").on("click",".content-container",i),e(".loader").fadeOut("slow")})},singleEdit:function(t,o){e(".loader").show();var n="#"+e(t).data("content-id"),a=e(o).data("single-edit-column-id"),i=e(o).data("single-edit-content-id"),c="#"+e(o).data("single-edit-content-id"),l=e(o).data("single-edit-content-type"),s=e.ajax({url:ajaxurl,type:"POST",data:{action:"semplice_ce_ajax",edit_mode:"single-edit",id:i,ccId:n,column_id:a,content_type:l,rom:d[n].columns[a][c],single_edit_db:d[n].dynamic_block},dataType:"html"});s.done(function(t){e(n).append(t),e(n).find(".mc-content-container").remove(),e(n).find(".background-upload-box").each(function(){e(this).children("input[name=background-image]").val()&&e(this).children(".bg-image-preview, .column-bg-image-preview").show()}),e("input[name=img]").val()&&e(n).find("img.image-preview").show(),e(n).find(".color-picker").wpColorPicker(h),e(n).find(".wp-picker-default").remove(),e(c).find(".fadein").transition({opacity:1},500,"ease",function(){e(this).removeClass("fadein")}),e(n).addClass("in-edit-mode"),e(".loader").fadeOut("slow"),e(e.browser.webkit?"body":"html").animate({scrollTop:e(n).offset().top-100},0)}),s.fail(function(t,o){sweetAlert({title:"Error",type:"error",text:"Request failed: "+o,confirmButtonText:"Ok fine!"}),e(".loader").fadeOut("slow")})},duplicate:function(t){var o=(e(t).data("content-id"),"#"+e(t).data("content-id")),n=e(t).data("content-type"),a=k("content"),i="#"+a;d[i]=jQuery.extend(!0,{},d[o]),e(o).clone().insertAfter(o).attr("id",a).html("");var c=e('<a data-content-id="'+a+'" data-content-type="'+n+'">');"multi-column"!==n&&e("#semplice").off("click",".content-container"),u.edit(c)},remove:function(t){var o="#"+e(t).data("content-id");e(o).transition({opacity:0,scale:.6},400,"ease",function(){delete d[o],e(o).remove(),!e.trim(e("#content-holder").html()).length&&e(".show-all-layers").length<=0&&e(".semplice-ce-default").clone(!0).appendTo("#semplice-content").stop().fadeIn(500)})},removeColumn:function(t){var o="#"+e(t).data("content-id"),n=e(t).data("parent-id");e(o).transition({opacity:0,marginTop:-40},400,"ease",function(){void 0!==d[n]&&delete d[n][o],e(o).remove()})},collapseColumn:function(t,o){var n=e(t).attr("data-column-id"),a=e(t).attr("data-status");o?(e("#"+n+" .column-collapse").attr("data-status","closed").removeClass("open").addClass("closed").text("Expand"),e("#"+n+" .column-body").stop().hide(),e(e.browser.webkit?"body":"html").animate({scrollTop:e("#"+n).offset().top-120},0)):"open"!==a?(e(t).attr("data-status","open").removeClass("closed").addClass("open").text("Collapse"),e("#"+n+" .column-body").stop().show()):(e(t).attr("data-status","closed").removeClass("open").addClass("closed").text("Expand"),e("#"+n+" .column-body").stop().hide())},up:function(t){var o="#"+e(t).data("content-id"),n=e(o).prev().attr("id");if("column-up"===e(t).attr("class")){var a=e(o).attr("data-order"),i=e(o).prev().attr("data-order");void 0!==i&&(e(o).attr("data-order",i),e(o).find(".column-count").text(i),e("#"+n).attr("data-order",a),e("#"+n).find(".column-count").text(a))}e(o).insertBefore("#"+n),e(e.browser.webkit?"body":"html").animate({scrollTop:e(o).offset().top-100},0)},down:function(t){var o="#"+e(t).data("content-id"),n=e(o).next().attr("id");if("column-down"===e(t).attr("class")){var a=e(o).attr("data-order"),i=e(o).next().attr("data-order");i<=e(".column").length&&(e(o).attr("data-order",i),e(o).find(".column-count").text(i),e("#"+n).attr("data-order",a),e("#"+n).find(".column-count").text(a))}e(o).insertAfter("#"+n),e(e.browser.webkit?"body":"html").animate({scrollTop:e(o).offset().top-100},0)},removeMedia:function(t,o){var n="#"+e(t).data("content-id");e(n).find(".is-"+o).first().val(""),e(n).find("."+o+"-upload").first().text("Upload "+o),e(n).find("."+o+"-preview").first().attr("src",""),e(n).find("."+o+"-preview").first().hide(),"branding-bg-image"===o&&(e(n).find(".is-"+o).val(""),e("#semplice-content").css("background-image","none"),d.branding["background-image"]="")},removeBg:function(t){var o="#"+e(t).data("content-id");e(o).find(".is-bg-image").val(""),e(o).find(".bg-upload").text("Upload Image"),e(o).find(".bg-preview").attr("src",""),e(o).find(".bg-preview").hide()},customFontset:function(t){var o=e.ajax({url:ajaxurl,type:"POST",data:{action:"semplice_ce_ajax",edit_mode:"custom-fontset",fontset_id:t},dataType:"html"});o.done(function(o){d.fontset=t?t:"default",e("[data-fontset-id=ce-fontset]").remove(),e("style[id=ce-fontset]").remove(),e("head").append(o),e(".loader").fadeOut("slow")}),o.fail(function(t,o){sweetAlert({title:"Error",type:"error",text:"Request failed: "+o,confirmButtonText:"Ok fine!"}),e(".loader").fadeOut("slow")})},loadTemplate:function(t,o){e(".loader").show(),e(".templates-sub").fadeOut(250,function(){var n=e.ajax({url:ajaxurl,type:"POST",data:{action:"semplice_ce_ajax",edit_mode:"load-template",template_id:t,template_type:o},dataType:"json"});n.done(function(t){e("#semplice-content").html(t.html),d=e.parseJSON(t.rom),void 0===d.branding&&(d.branding={}),void 0===d.modules&&(d.modules=[]),d.branding=e.parseJSON(t.branding),e("#semplice-content").css({"background-color":d.branding["background-color"],"background-image":"url("+d.branding["background-image"]+")","background-size":d.branding["background-size"],"background-position":d.branding["background-position"],"background-repeat":d.branding["background-repeat"]}),e(".branding-bg-color").val(d.branding["background-color"]),e(".branding-sub .wp-color-result").css("backgroundColor",d.branding["background-color"]);var o=[d.branding["background-size"],d.branding["background-position"],d.branding["background-repeat"]],n=0;if(e(".branding-sub .select-box").each(function(){var t=o[n];e(this).find("option").each(function(){e(this).val()===t?e(this).attr("selected","selected"):e(this).removeAttr("selected")}),n++}),d.branding["background-image"]&&(e(".branding-bg-image-preview").attr("src",d.branding["background-image"]).show(),e("input[name=branding-bg-image]").val(d.branding["background-image"])),d.fontset){var a=d.fontset;"default"!==a?(e(".custom-fontset").find("option").each(function(){e(this).val()===a?e(this).attr("selected","selected"):e(this).removeAttr("selected")}),u.customFontset(a)):u.customFontset("default")}e(".loader").fadeOut("slow")}),n.fail(function(t,o){sweetAlert({title:"Error",type:"error",text:"Request failed: "+o,confirmButtonText:"Ok fine!"}),e(".loader").fadeOut("slow")}),n.error(function(e){sweetAlert({title:"Error",type:"error",text:e.responseText,confirmButtonText:"Ok fine!"})})})},showLayers:function(t){e(".options-sub .show-layers").addClass("checked");var o=t.data("content-id");e("#semplice").addClass("show-all-layers"),e(".content-container, .mc-content-container").hide(),e("#content-holder").sortable({axis:"y",cancel:".edit-content, .top-layer"});var n;e("#content-holder > div").each(function(){var t=!1,a="",i="#"+e(this).attr("id"),c=e(this).attr("id"),l=e(this).children(".content-container, .mc-content-container").attr("data-content-type"),s="module-"+e(this).children(".content-container").attr("data-modules-array");if(s||(s=""),e(this).hasClass("in-edit-mode")){e(this).find(".edit-content").hide(),e(this).addClass("layer-mode"),t="edit",a="In edit mode";var r=e(this).find('input[name="layer-name"]').val()}else var r=d[i].options["layer-name"];o==c?(e(this).append('<div class="layer"><div class="icon '+s+'"></div><p class="layer-name">'+r+'</p><a class="edit-layer" data-content-id="'+c+'" data-content-type="'+l+'" data-edit-mode="'+t+'"></a><a class="remove" data-content-id="'+c+'"></a><p class="in-edit-mode">'+a+'</p><div class="active-layer"></div><div class="drag-icon"></div>'),n=i):e(this).append('<div class="layer"><div class="icon '+s+'"></div><p class="layer-name">'+r+'</p><a class="edit-layer" data-content-id="'+c+'" data-content-type="'+l+'" data-edit-mode="'+t+'"></a><a class="remove" data-content-id="'+c+'"></a><p class="in-edit-mode">'+a+'</p><div class="drag-icon"></div>'),e(this).children(".layer").stop().fadeIn(300)}),e("#semplice-content").prepend('<div class="layer top-layer hide-layers" data-content-id="'+o+'"><div class="icon"></div><p class="layer-name">Back to edit mode</p></div>'),e(".top-layer").fadeIn(300),n&&e(e.browser.webkit?"body":"html").animate({scrollTop:e(n).offset().top-150},0),e(t).addClass("checked")},hideLayers:function(t,o){e(".options-sub .show-layers").removeClass("checked");var n=e(t).data("content-id"),a=e(t).data("edit-mode"),i=e(t).data("content-type");e("#semplice").removeClass("show-all-layers"),e(".content-container, .mc-content-container").show(),e("#content-holder > div").each(function(){e(this).children(".layer").remove(),e(this).hasClass("in-edit-mode")&&(e(this).find(".edit-content").show(),e(this).removeClass("layer-mode"))}),e(".top-layer").remove(),e("#content-holder").sortable("destroy"),e.trim(e("#content-holder").html()).length||e(".semplice-ce-default").clone(!0).appendTo("#semplice-content").stop().fadeIn(500),o&&"edit"!==a?("multi-column"!==i&&e("#semplice").off("click",".content-container"),u.edit(t)):"undefined"!==n&&e(e.browser.webkit?"body":"html").animate({scrollTop:e("#"+n).offset().top-100},0)},saveBlock:function(t){e(".loader").show();var o="#"+e(t).data("content-id"),n=e(t).data("content-type"),a=e(o).html(),i=e(".save-block-name").val();i||(i="Untitled Block");var c=e.ajax({url:ajaxurl,type:"POST",data:{action:"semplice_ce_ajax",edit_mode:"save-block",id:o,rom:d[o],block_html:a,block_name:i,content_type:n},dataType:"html"});c.done(function(t){e("#blocks").html(t),e(".block-added").fadeIn(500).delay(2e3).fadeOut(200),e(".loader").fadeOut("slow")}),c.fail(function(t,o){sweetAlert({title:"Error",type:"error",text:"Request failed: "+o,confirmButtonText:"Ok fine!"}),e(".loader").fadeOut("slow")}),e("#semplice").off("click",".save-block-confirm")},previewBlock:function(t){e(".loader").show();var o=(e(t).data("content-type"),e(t).data("block-id")),n=e(t).data("block-type"),a=e.ajax({url:ajaxurl,type:"POST",data:{action:"semplice_ce_ajax",edit_mode:"preview-block",block_id:o,block_type:n},dataType:"html"});a.done(function(t){"noconnection"!==t?(e(".overlay-preview").show().stop().transition({opacity:".7"},350,"ease"),e("#block-preview").fadeIn(350).html(t)):sweetAlert({title:"Whooops",text:"No connection. Either we or you are offline. Please try again later.",confirmButtonText:"Ok fine!"}),e(".loader").fadeOut("slow")}),a.fail(function(t,o){sweetAlert({title:"Error",type:"error",text:"Request failed: "+o,confirmButtonText:"Ok fine!"}),e(".loader").fadeOut("slow")}),a.error(function(e){sweetAlert({title:"Error",type:"error",text:e.responseText,confirmButtonText:"Ok fine!"})})},addBlock:function(t){e(".overlay-transparent").stop().transition({x:"0px",opacity:"0"},500,"snap",function(){e(".overlay-transparent").hide()}),e("#semplice-content, .main-adder").stop().transition({x:"0px",opacity:"1"},500,"snap").css("transform","none"),e("#blocks").removeClass("open").stop().transition({x:"570px"},500,"snap"),e("#block-preview").fadeOut(350),e(".overlay-preview").stop().transition({opacity:"0"},350,"ease").hide(),e(".loader").show();var o=e(t).data("content-id"),n="#"+e(t).data("content-id"),a=k("content"),i="#"+a,c=e(t).data("content-type"),l=e(t).data("block-id"),s=e(t).data("block-type");e("#semplice-content").find(e(".semplice-ce-default")).is(":visible")&&e("#semplice-content").find(e(".semplice-ce-default")).remove();var r=e.ajax({url:ajaxurl,type:"POST",data:{action:"semplice_ce_ajax",edit_mode:"add-block",block_id:l,block_type:s,block_content_ids:[o,a]},dataType:"json"});r.done(function(t){"noconnection"!==t.rom?e("#content-holder").find(e(n)).length>0&&"dynamic"==s?sweetAlert({title:"Whooops",text:"Per page there is only one instance of an individual dynamic block allowed!",confirmButtonText:"Ok fine!"}):("dynamic"===s&&(i=n,a=o),d[i]=jQuery.extend(!0,{},e.parseJSON(t.rom)),e("#content-holder").append('<div id="'+a+'" class="'+c+'">'+t.html+"</div>"),"multi-column"!==c?e(i).children(".content-container").attr("data-content-id",a):e(i).find("[data-content-id]").each(function(){e(this).attr("data-content-id",a)}),e(e.browser.webkit?"body":"html").animate({scrollTop:e(i).offset().top-100},0)):sweetAlert({title:"Whooops",text:"No connection. Either we or you are offline. Please try again later.",confirmButtonText:"Ok fine!"}),e(".loader").fadeOut("slow");

}),r.fail(function(t,o){sweetAlert({title:"Error",type:"error",text:"Request failed: "+o,confirmButtonText:"Ok fine!"}),e(".loader").fadeOut("slow")}),r.error(function(e){sweetAlert({title:"Error",type:"error",text:e.responseText,confirmButtonText:"Ok fine!"})})},removeBlock:function(t){e(".loader").fadeIn("slow");var o=e(t).data("content-id"),n=e(t).data("block-id"),a=e(t).data("block-type"),i=e.ajax({url:ajaxurl,type:"POST",data:{action:"semplice_ce_ajax",edit_mode:"remove-block",block_id:n,block_type:a},dataType:"html"});i.done(function(t){1===e("ul.user-defined li").length&&e("#user-defined h4").fadeOut(400),e("#blocks").find("[data-block-id="+n+"]").transition({opacity:0,scale:.6},600,"ease",function(){e("#blocks").find("[data-block-id="+n+"]").remove(),"dynamic"===a&&(e(o).remove(),delete d[o]),e("ul.user-defined li").length<1&&(e("#user-defined").append('<div class="no-blocks" style="display: none;"><div class="inner"><p>Hey! You can also<br />create your own blocks.<br />See how it works.</p><img src="'+wordpress.template_url+'/content-editor/images/no_blocks.png"></div></div>'),e(".no-blocks").fadeIn("slow"))}),e(".loader").fadeOut("slow")}),i.fail(function(t,o){sweetAlert({title:"Error",type:"error",text:"Request failed: "+o,confirmButtonText:"Ok fine!"}),e(".loader").fadeOut("slow")}),i.error(function(e){sweetAlert({title:"Error",type:"error",text:e.responseText,confirmButtonText:"Ok fine!"})})},codeEditor:function(t){e(".overlay").fadeIn(200),e(".loader").fadeIn("slow");var o=e(t).data("content-id"),n=e("#code_mirror_"+o).val(),a=e.ajax({url:ajaxurl,type:"POST",data:{action:"semplice_ce_ajax",edit_mode:"code-editor",id:o,code:n},dataType:"html"});a.done(function(t){e("#semplice").append(t),e("#code-editor").transition({opacity:1,scale:1},350,"ease"),e(".loader").fadeOut("slow")}),a.fail(function(t,o){sweetAlert({title:"Error",type:"error",text:"Request failed: "+o,confirmButtonText:"Ok fine!"}),e(".loader").fadeOut("slow")}),a.error(function(e){sweetAlert({title:"Error",type:"error",text:e.responseText,confirmButtonText:"Ok fine!"})})},codeEditorSave:function(t){var o=e(t).data("content-id");e("#code_mirror_"+o).val(e("#code_mirror").val()),e(".overlay").fadeOut(350),e("#code-editor").transition({opacity:0,scale:.9},350,"ease",function(){e("#code-editor").remove()})},saveToWp:function(){e(".loader").show(),e("#semplice-content").find(e(".semplice-ce-default")).is(":visible")&&e("#semplice-content").find(e(".semplice-ce-default")).remove(),e("head").find("[data-fontset-id=ce-fontset]").each(function(){e(this).remove()}),e("#ce-fontset").remove(),e(".is-shortcode").each(function(){e(this).find(".executed").html(e(this).find(".unexecuted").html().replace("unex_",""))}),e("#semplice-content").find("[data-dynamic-block]").each(function(){var t=e(this).attr("data-dynamic-block"),o="#"+e(this).attr("data-content-id"),n='[ce_dynamic_block id="'+t+'"][/ce_dynamic_block]';e(o).html(n)}),e(".oembed-content, .code-content").each(function(){var t=e(this).html().replace("unex_","");e(this).html(t)});var t=e("#semplice-content").html();e(".semplice-content").val(t),d.branding={"background-color":e(".branding-bg-color").val(),"background-image":e(".branding-bg-image").val(),"background-size":e(".branding-bg-size").val(),"background-position":e(".branding-bg-pos").val(),"background-repeat":e(".branding-bg-repeat").val(),"background-attachment":e(".branding-bg-attachment").val()},0===d.fontset.length&&(d.fontset="default"),e(".fontset").val(d.fontset),e(".rom").val(JSON.stringify(d));var o=e(".content-p").length,n=e(".content-img").length,a=e(".content-video").length,i=e(".mc-sub-content-container").length,c=e(".content-gallery").length,l=e(".content-audio").length,s=e(".content-spacer").length,m=e(".content-thumbnails").length,p='<span class="comment">// Content stats</span><br /><br /><span class="num">'+o+'</span> paragraph(s), <span class="num">'+n+'</span> image(s)<br /><span class="num">'+a+'</span> video(s), <span class="num">'+i+'</span> column content(s)<br /><span class="num">'+c+'</span> gallery(s), <span class="num">'+l+'</span> audio file(s)<br /><span class="num">'+s+'</span> spacer(s), <span class="num">'+m+"</span> thumbview";e(".branding").val(JSON.stringify(d.branding)),e("[data-modules-array]").each(function(){d.modules.push(e(this).data("modules-array"))}),e(".modules").val(JSON.stringify(d.modules)),e(".stats").val(p),e(".content-code").html(p),r=!0,e(".why-deactivated").remove(),e("#post-preview").attr("href","").css({pointerEvents:"none",opacity:".4"}).after('<div class="why-deactivated"><a href="http://help.semplicelabs.com/customer/en/portal/articles/2346038-why-is-the-preview-changes-button-disabled-" target="_blank">Why deactivated?</div></div>'),e("#wpwrap").show(),e(".wp-pointer").show(),e("#semplice").fadeOut(300,function(){e(e.browser.webkit?"body":"html").animate({scrollTop:0},0)})}};e(document).on("click",".add-semplice-editor",function(){r?sweetAlert({title:"Whooops",text:"Please update or save your page / project before reopen the content editor!",confirmButtonText:"Ok fine!"}):(e("#semplice").appendTo("body"),e(e.browser.webkit?"body":"html").animate({scrollTop:0},0,function(){e("#semplice").fadeIn(300,function(){e("#wpwrap").hide(),e(".wp-pointer").hide(),u.init()})}))}),e("#semplice").on("click",".add-content",function(){e("#semplice").hasClass("show-all-layers")?sweetAlert({title:"Whooops",text:"Please exit the layer mode to add new content",confirmButtonText:"Ok fine!"}):u.add(e(this))}),e("#semplice").on("click",".add-column-content",function(){u.addColumnContent(e(this))}),e("#semplice").on("click",".add-column",t),e("#semplice").on("click",".preview-block",function(){u.previewBlock(e(this))}),e("#semplice").on("click",".add-block",function(){e("#semplice").hasClass("show-all-layers")?sweetAlert({title:"Whooops",text:"Please exit the layer mode to add new content",confirmButtonText:"Ok fine!"}):u.addBlock(e(this))}),e("#semplice").on("click",".save",{duplicate:!1,save_block:!1},o),e("#semplice").on("click",".duplicate",{duplicate:!0,save_block:!1},o),e("#semplice").on("click",".save-block",{duplicate:!1,save_block:!0},o),e("#semplice").on("click",".save-mc",{duplicate:!1,save_block:!1},n),e("#semplice").on("click",".duplicate-mc",{duplicate:!0,save_block:!1},n),e("#semplice").on("click",".save-block-mc",{duplicate:!1,save_block:!0},n),e("#semplice").on("click",".save-se",a),e("#semplice").on("click",".edit",function(){u.edit(e(this))}),e("#semplice").on("click",".content-container",i),e("#semplice").on("click",".edit-layer",i),e("#semplice").on("click",".video",function(e){e.stopPropagation()}),e("#semplice").on("click",".mc-sub-content-container",function(t){var o=e(this),n=e(this).offset().left,a=e(this).offset().top;e(this).children(".single-edit").css({top:t.pageY-a,left:t.pageX-n}).show(),e(this).find(".edit-column").unbind().click(function(){e(o).children(".single-edit").remove(),u.edit(e(o))}),e(this).find(".edit-single").unbind().click(function(){e(o).children(".single-edit").remove(),u.singleEdit(e(o),e(this))})}),e("#semplice").on("click","a.column-duplicate",function(){u.duplicateColumn(e(this))}),e("#semplice").on("click",".remove",function(){e(".remove-confirm").data({"content-id":e(this).data("content-id"),"is-column":"","parent-id":""}),e(".overlay").fadeIn(100),e(".confirm").fadeIn(100)}),e("#semplice").on("click",".remove-column",function(){e(".remove-confirm").data({"content-id":e(this).data("column-id"),"is-column":"is-column","parent-id":e(this).data("parent-id")}),e(".overlay").fadeIn(100),e(".confirm").fadeIn(100)}),e("#semplice").on("click",".remove-confirm",function(){e(".overlay").fadeOut(100),e(".confirm").fadeOut(100);var t=e(this);"is-column"===e(this).data("is-column")?u.removeColumn(e(t)):u.remove(e(t))}),e("#semplice").on("click",".remove-decline",function(){e(".overlay").fadeOut(100),e(".confirm").fadeOut(100)}),e("#semplice").on("click",".column-collapse",function(){u.collapseColumn(e(this),!1)}),e("#semplice").on("click",".column-collapse-hide-only",function(){u.collapseColumn(e(this),!0)}),e("#semplice").on("click",".cancel-to-wp",function(){e(".overlay").fadeIn(100),e(".cancel").fadeIn(100)}),e("#semplice").on("click",".remove-block",function(){e(".remove-block-confirm").data({"block-id":e(this).data("block-id"),"block-type":e(this).data("block-type"),"content-id":e(this).data("content-id")}),e(".text-dynamic").hide(),e(".text-static").show(),e(".block-edit").fadeIn(100),"dynamic"===e(this).data("block-type")&&(e(".text-dynamic").show(),e(".text-static").hide())}),e("#semplice").on("click",".remove-block-confirm",function(){e(".block-edit").fadeOut(100);var t=e(this);u.removeBlock(e(t))}),e("#semplice").on("click",".remove-block-decline",function(){e(".block-edit").fadeOut(100)}),e("#semplice").on("click",".cancel-confirm",function(){e(".overlay").fadeOut(100),e(".cancel").fadeOut(100,function(){e("#wpwrap").show(),e("#semplice").fadeOut(300,function(){window.onbeforeunload=null})})}),e("#semplice").on("click",".cancel-decline",function(){e(".overlay").fadeOut(100),e(".cancel").fadeOut(100)}),e("#semplice").on("click",".show-layers",function(){e("#semplice").hasClass("show-all-layers")?u.hideLayers(e(this)):e("#semplice-content").find(e(".semplice-ce-default")).is(":visible")?sweetAlert({title:"Whooops",text:"To re-order your layers you have to add content first!",confirmButtonText:"Ok fine!"}):u.showLayers(e(this))}),e("#semplice").on("click",".code-editor",function(){u.codeEditor(e(this))}),e("#semplice").on("click",".code-save",function(){u.codeEditorSave(e(this))}),e("#semplice").on("click",".code-cancel",function(){e(".overlay").fadeOut(350),e("#code-editor").transition({opacity:0,scale:.9},500,"ease",function(){e("#code-editor").remove()})}),e("#semplice").on("click",".hide-layers",function(){u.hideLayers(e(this))}),e("#semplice").on("click",".up",function(){u.up(e(this))}),e("#semplice").on("click",".down",function(){u.down(e(this))}),e("#semplice").on("click",".column-up",function(){u.up(e(this))}),e("#semplice").on("click",".column-down",function(){u.down(e(this))}),e("#semplice").on("click",".remove-media",function(){u.removeMedia(e(this),e(this).data("media"))}),e("#semplice").on("click",".save-to-wp-activated",function(){e("#semplice-content").find(".in-edit-mode").length?sweetAlert({title:"Whooops",text:"Please save or delete open edit fields.",confirmButtonText:"Ok fine!"}):e("#semplice").hasClass("show-all-layers")?sweetAlert({title:"Whooops",text:"Please exit the layer mode before save.",confirmButtonText:"Ok fine!"}):u.saveToWp()}),e("#semplice").on("change",".select-box",function(){var t=e(this).val();e(this).find("option").each(function(){e(this).val()===t?e(this).attr("selected","selected"):e(this).removeAttr("selected")})}),e("#semplice").on("change",".branding-bg-select",function(){var t=e(this).data("css-attribute");e("#semplice-content").css(t,e(this).val())}),e("#semplice").on("change",".custom-fontset",function(){e(".loader").show();var t=e(this).val();e(this).find("option").each(function(){e(this).val()===t?e(this).attr("selected","selected"):e(this).removeAttr("selected")}),u.customFontset("default"!==t?t:"default")}),e("#semplice").on("click","a.background",function(){e(this).next(".background-sub").fadeIn(150)}),e("#semplice").on("click","a.ce-dismiss",function(){e(".overlay").fadeOut(150),e(".no-images").fadeOut(250)}),e("#semplice").on("change",".select-project, .select-page",function(){var t=e(this).val();"default"!==t&&(e(".loader").show(),e(".template-confirm").data({"template-id":t,"template-type":"object"}),e(".overlay").fadeIn(100),e(".confirm-template").fadeIn(100))}),e("#semplice").on("click","a.load-template",function(){e(".template-confirm").data({"template-id":e(this).data("template-id"),"template-type":"semplice"}),e(".overlay").fadeIn(100),e(".confirm-template").fadeIn(100)}),e("#semplice").on("click",".template-confirm",function(){e(".overlay").fadeOut(100),e(".confirm-template").fadeOut(100),u.loadTemplate(e(this).data("template-id"),e(this).data("template-type"))}),e("#semplice").on("click",".template-decline",function(){e(".loader").hide(),e(".overlay").fadeOut(100),e(".confirm-template").fadeOut(100)}),e("#semplice").on("click","a.branding",function(){e(".branding-sub").fadeIn(150)}),e("#semplice").on("click","a.show-templates",function(){e(".templates-sub").fadeIn(150)}),e("#semplice").on("click","a.show-blocks",function(){e(".overlay-transparent").stop().show().transition({opacity:".7",x:"-490px"},500,"snap"),e("#semplice-content, .main-adder").stop().transition({x:"-490px"},500,"snap"),e("#blocks, .block-edit").addClass("open").stop().transition({x:"0px"},500,"snap")}),e("#semplice").on("click","a.show-options",function(){e(".options-sub").fadeIn(150)}),e("#semplice").on("click","a.show-modules",function(){if(e(this).data("in-column")){var t=e(this).data("column-id");e(".modules-sub-"+t).fadeIn(150)}else e(".modules-sub-global").fadeIn(150)}),e("#semplice").on("click","a.padding",function(){e(this).next(".padding-sub").fadeIn(150)}),e("#semplice").on("change","select[name=wysiwyg_bg_color]",function(){e("#semplice-decss").append("white"===e(this).val()?"#cke_"+e(this).data("content-id")+" .cke_wysiwyg_div { background-color: #ffffff; }":"#cke_"+e(this).data("content-id")+" .cke_wysiwyg_div { background-color: #000000; }")}),e("#semplice").on("click",".ce-help",function(){e(this).children("span").css("display","inline")}),e("#semplice").mouseup(function(t){var o=e(".background-sub"),n=e(".media-modal-content"),a=e("#block-preview, #block-preview img, #block-preview p"),i=e(".overlay-preview");o.is(t.target)||n.is(t.target)||0!==o.has(t.target).length||o.fadeOut(150);var c=e(".branding-sub");c.is(t.target)||0!==c.has(t.target).length||c.fadeOut(150);var l=e(".options-sub");l.is(t.target)||0!==l.has(t.target).length||l.fadeOut(150);var s=e("#blocks, .block-edit");s.is(t.target)||a.is(t.target)||i.is(t.target)||0!==s.has(t.target).length||e(".overlay-transparent").is(t.target)&&(e(".overlay-transparent").stop().transition({x:"0px",opacity:"0"},500,"snap",function(){e(".overlay-transparent").hide()}),e("#semplice-content, .main-adder").stop().transition({x:"0px",opacity:"1"},500,"snap").css("transform","none"),e("#blocks, .block-edit").removeClass("open").stop().transition({x:"490px"},500,"snap"),e(".block-edit").fadeOut("slow")),a.is(t.target)||0!==a.has(t.target).length||(a.stop().fadeOut(350),e(".overlay-preview").stop().transition({opacity:"0"},350,"ease").hide());var d=e(".templates-sub");d.is(t.target)||0!==d.has(t.target).length||d.fadeOut(250);var r=e(".modules-sub");r.is(t.target)||0!==r.has(t.target).length||r.fadeOut(250);var m=e(".padding-sub");m.is(t.target)||0!==m.has(t.target).length||m.fadeOut(150);var p=e(".single-edit");p.is(t.target)||0!==p.has(t.target).length||p.hide();var u=e(".ce-help span");u.is(t.target)||0!==u.has(t.target).length||u.css("display","none")}),e(".show-grid").toggle(function(){e("#grid").fadeIn("300"),e(this).addClass("checked")},function(){e("#grid").fadeOut("300"),e(this).removeClass("checked")}),e("#semplice").on({mouseenter:function(){var t=e(this).find(".tooltip").width();t=(t-60)/2,e(this).find(".tooltip").css("marginLeft",-t),e(this).find(".tooltip").stop().fadeIn(120)},mouseleave:function(){e(this).find(".tooltip").stop().fadeOut(120)}},"ul.types li"),e("#semplice").on({mouseenter:function(){var t=e(this).find(".tooltip").width();t=(t-e(this).width())/2,e(this).find(".tooltip").css("marginLeft",-t),e(this).find(".tooltip").stop().fadeIn(120)},mouseleave:function(){e(this).find(".tooltip").stop().fadeOut(120)}},"ul.atts-save li");var f=!0;wordpress.color_palette&&(f=wordpress.color_palette.split(","));var h={defaultColor:!1,change:function(e,t){},hide:!0,palettes:f},v={defaultColor:!1,change:function(t,o){e("#semplice-content").css("background-color",o.color.toString())},hide:!0,palettes:f},k=function(e){return e+"_"+Math.random().toString(36).substr(2,9)}})}(jQuery);